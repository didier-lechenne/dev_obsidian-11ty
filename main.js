/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => Obsidian11tyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/utils/constants.ts
var CSS_VAR_MAPPING = {
  col: "--col",
  printCol: "--print-col",
  width: "--width",
  printWidth: "--print-width",
  printRow: "--print-row",
  printHeight: "--print-height",
  alignSelf: "--align-self",
  alignself: "--align-self",
  "align-self": "--align-self",
  imgX: "--img-x",
  imgY: "--img-y",
  imgW: "--img-w",
  page: "--pagedjs-full-page"
};
var SHORTCODE_REGEX = /\{%\s*(\w+)\s+([^%]+)\s*%\}/g;
var SUPPORTED_SHORTCODE_TYPES = [
  "image",
  "grid",
  "video",
  "figure",
  "imagenote",
  "fullpage"
];
var MEDIA_TEMPLATES = {
  image: {
    template: '<figure id="{id}" data-type="{type}" data-grid="image" class="figure {type} {classes}" data-src="{src}"{styles}>{media}<figcaption class="figcaption">{caption}</figcaption></figure>'
  },
  imagenote: {
    template: '<span id="{id}" data-type="{type}" class="{type} {classes}" data-src="{src}"{styles}>{media}<span class="figcaption">{caption}</span></span>'
  },
  figure: {
    template: '<figure id="{id}" data-src="{src}" data-type="{type}" data-grid="image" class="{type} {classes}"{styles}>{media}<figcaption class="figcaption">{caption}</figcaption></figure>'
  },
  grid: {
    template: '<figure id="{id}" data-src="{src}" data-type="{type}" data-grid="image" class="figure {type} {classes}"{styles}>{media}</figure><figcaption class="figcaption"{styles}>{caption}</figcaption>'
  },
  fullpage: {
    template: '<figure id="{id}" data-src="{src}" data-type="{type}" data-grid="image" class="full-page figure {type} {classes}"{styles}>{media}</figure>'
  },
  video: {
    template: '<figure id="{id}" data-type="{type}" data-grid="content" class="video {classes}"{styles}>{media}<figcaption class="figcaption">{caption}</figcaption></figure>'
  }
};

// src/utils/helpers.ts
function generateStyles(config) {
  const styles = {};
  Object.entries(config).forEach(([key, value]) => {
    if (CSS_VAR_MAPPING[key] && value !== void 0 && value !== null && value !== "") {
      const cleanValue = typeof value === "string" ? value.replace(/^["']|["']$/g, "") : value;
      styles[CSS_VAR_MAPPING[key]] = cleanValue;
    }
  });
  return styles;
}
function cleanAlt(caption) {
  if (!caption) return "";
  return caption.replace(/\*([^*]+)\*/g, "$1").replace(/<[^>]+>/g, " ").replace(/&[^;]+;/g, " ").replace(/\s+/g, " ").trim();
}
function renderMarkdown(text) {
  return text.replace(/~~(.*?)~~/g, "<del>$1</del>").replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>").replace(/\*(.*?)\*/g, "<em>$1</em>").replace(/`(.*?)`/g, "<code>$1</code>").replace(/<br>/g, "<br>");
}
function parseShortcodeParams(params) {
  params = params.replace(/\s+/g, " ").trim();
  const match = params.match(/^["']([^"']+)["'](?:\s*,\s*(\{.*\}))?$/) || params.match(/^([^,\s]+)(?:\s*,\s*(\{.*\}))?$/);
  if (!match) {
    const commaIndex = params.indexOf(",");
    if (commaIndex > 0) {
      const src2 = params.substring(0, commaIndex).trim().replace(/^["']|["']$/g, "");
      const optionsStr = params.substring(commaIndex + 1).trim();
      let options2 = {};
      if (optionsStr.startsWith("{")) {
        try {
          const cleanOptions = optionsStr.replace(/,(\s*[}\]])/g, "$1");
          options2 = Function(`"use strict"; return (${cleanOptions})`)();
        } catch (e) {
          console.warn("Erreur parsing options:", e);
        }
      }
      return { src: src2, options: options2 };
    }
    throw new Error("Format de param\xE8tres invalide");
  }
  const src = match[1];
  let options = {};
  if (match[2]) {
    try {
      const cleanOptions = match[2].replace(/,(\s*[}\]])/g, "$1");
      options = Function(`"use strict"; return (${cleanOptions})`)();
    } catch (e) {
      console.warn("Erreur parsing options:", e);
      options = {};
    }
  }
  return { src, options };
}

// src/utils/shortcode-renderer.ts
var ShortcodeRenderer = class {
  constructor(app) {
    this.app = app;
    this.globalElementCounter = 0;
  }
  render(type, params) {
    if (!SUPPORTED_SHORTCODE_TYPES.includes(type)) {
      console.warn(`Type de shortcode non support\xE9: ${type}`);
      return null;
    }
    const { src, options = {} } = params;
    const config = { src: this.resolveImagePath(src), ...options };
    this.globalElementCounter++;
    const template = MEDIA_TEMPLATES[type];
    if (!template) return null;
    const templateData = {
      id: config.id || `${type}-${this.globalElementCounter}`,
      type,
      classes: config.class || "",
      src: config.src || "",
      media: this.createMediaElement(type, config),
      caption: config.caption ? renderMarkdown(config.caption) : "",
      styles: this.generateStylesString(config)
    };
    const htmlString = this.renderTemplate(template.template, templateData);
    const tempDiv = document.createElement("div");
    tempDiv.innerHTML = htmlString;
    const element = tempDiv.firstElementChild;
    if (element) {
      this.addEditOnClick(element);
      if (type === "grid" && tempDiv.children.length > 1) {
        const wrapper = document.createElement("div");
        Array.from(tempDiv.children).forEach((child) => wrapper.appendChild(child));
        return wrapper;
      }
    }
    return element;
  }
  resolveImagePath(src) {
    if (!src) return "";
    if (src.startsWith("http") || src.startsWith("app://")) {
      return src;
    }
    const file = this.app.metadataCache.getFirstLinkpathDest(src, "");
    if (file) {
      return this.app.vault.getResourcePath(file);
    }
    return `app://local/${encodeURIComponent(src)}`;
  }
  renderTemplate(template, data) {
    return template.replace(/{id}/g, data.id).replace(/{type}/g, data.type).replace(/{classes}/g, data.classes).replace(/{src}/g, data.src).replace(/{media}/g, data.media).replace(/{caption}/g, data.caption).replace(/{styles}/g, data.styles);
  }
  createMediaElement(type, config) {
    if (type === "video") {
      const posterAttr = config.poster ? ` poster="${config.poster}"` : "";
      return `<video controls${posterAttr}><source src="${config.src}"></video>`;
    }
    return `<img src="${config.src}" alt="${cleanAlt(config.caption || "")}">`;
  }
  generateStylesString(config) {
    const styles = generateStyles(config);
    const styleArray = Object.entries(styles).map(([prop, value]) => `${prop}: ${value}`);
    return styleArray.length > 0 ? ` style="${styleArray.join("; ")}"` : "";
  }
  addEditOnClick(element) {
    element.style.cursor = "pointer";
    element.addEventListener("click", (event) => {
      event.preventDefault();
      event.stopPropagation();
      const editButton = this.findEditButton(element);
      if (editButton) {
        editButton.click();
      }
    });
  }
  findEditButton(element) {
    let parent = element.parentElement;
    while (parent) {
      const editButton = parent.querySelector(".edit-block-button");
      if (editButton) return editButton;
      parent = parent.parentElement;
    }
    return null;
  }
};

// src/utils/shortcode-processor.ts
var ShortcodeProcessor = class {
  constructor(app) {
    this.app = app;
    this.renderer = new ShortcodeRenderer(app);
  }
  // Pour les code blocks (Live Preview)
  processCodeBlock(source, el, ctx) {
    const container = el.parentElement;
    let type = "";
    if (container && container.className) {
      const match = container.className.match(/block-language-(\w+)/);
      if (match) {
        type = match[1];
      }
    }
    if (type && type !== "shortcode") {
      let src = "";
      let options = {};
      if (source.trim()) {
        try {
          const parsed = parseShortcodeParams(source.trim());
          src = parsed.src || "";
          options = parsed.options;
        } catch (e) {
          src = source.trim().replace(/['"]/g, "");
        }
      }
      const htmlElement = this.renderer.render(type, { src, options });
      if (htmlElement) {
        el.appendChild(htmlElement);
      }
      return;
    }
    const shortcodeMatch = source.match(/\{%\s*(\w+)\s+([^%]+)\s*%\}/);
    if (!shortcodeMatch) {
      console.warn("Format shortcode invalide dans code block");
      return;
    }
    const [, shortcodeType, params] = shortcodeMatch;
    try {
      const parsedParams = parseShortcodeParams(params);
      const htmlElement = this.renderer.render(shortcodeType, parsedParams);
      if (htmlElement) {
        el.appendChild(htmlElement);
      }
    } catch (error) {
      console.error("Erreur parsing shortcode:", error);
    }
  }
  processElement(element, context) {
    console.log("Processing element:", element);
    this.processNodeRecursively(element);
  }
  processNodeRecursively(node) {
    if (node.nodeType === Node.TEXT_NODE) {
      const textNode = node;
      if (textNode.textContent && this.containsShortcode(textNode.textContent)) {
        this.processTextNode(textNode);
        return;
      }
    }
    const children = Array.from(node.childNodes);
    children.forEach((child) => this.processNodeRecursively(child));
  }
  containsShortcode(text) {
    const hasShortcode = /\{%.*%\}/.test(text);
    if (hasShortcode) {
      console.log("Found shortcode in text:", text);
    }
    return hasShortcode;
  }
  processTextNode(textNode) {
    const text = textNode.textContent || "";
    const fragments = [];
    let lastIndex = 0;
    SHORTCODE_REGEX.lastIndex = 0;
    let match;
    while ((match = SHORTCODE_REGEX.exec(text)) !== null) {
      if (match.index > lastIndex) {
        fragments.push(text.slice(lastIndex, match.index));
      }
      const [fullMatch, type, params] = match;
      const htmlElement = this.parseAndRender(type, params);
      if (htmlElement) {
        fragments.push(htmlElement);
      } else {
        fragments.push(fullMatch);
      }
      lastIndex = match.index + fullMatch.length;
    }
    if (lastIndex < text.length) {
      fragments.push(text.slice(lastIndex));
    }
    if (fragments.length > 1 || fragments.length === 1 && typeof fragments[0] !== "string") {
      const parentNode = textNode.parentNode;
      if (parentNode) {
        fragments.forEach((fragment) => {
          if (typeof fragment === "string") {
            if (fragment.trim()) {
              parentNode.insertBefore(document.createTextNode(fragment), textNode);
            }
          } else {
            parentNode.insertBefore(fragment, textNode);
          }
        });
        parentNode.removeChild(textNode);
      }
    }
  }
  parseAndRender(type, params) {
    try {
      const parsedParams = parseShortcodeParams(params);
      return this.renderer.render(type, parsedParams);
    } catch (error) {
      console.error("Erreur parsing shortcode:", error);
      return null;
    }
  }
};

// src/main.ts
var Obsidian11tyPlugin = class extends import_obsidian.Plugin {
  async onload() {
    this.processor = new ShortcodeProcessor(this.app);
    this.registerMarkdownCodeBlockProcessor("image", this.processor.processCodeBlock.bind(this.processor));
    this.registerMarkdownCodeBlockProcessor("grid", this.processor.processCodeBlock.bind(this.processor));
    this.registerMarkdownCodeBlockProcessor("video", this.processor.processCodeBlock.bind(this.processor));
    this.registerMarkdownCodeBlockProcessor("figure", this.processor.processCodeBlock.bind(this.processor));
    this.registerMarkdownCodeBlockProcessor("imagenote", this.processor.processCodeBlock.bind(this.processor));
    this.registerMarkdownCodeBlockProcessor("fullpage", this.processor.processCodeBlock.bind(this.processor));
    this.registerMarkdownCodeBlockProcessor("11ty", this.processor.processCodeBlock.bind(this.processor));
    this.registerMarkdownPostProcessor((element, context) => {
      this.processor.processElement(element, context);
    });
  }
  onunload() {
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3V0aWxzL2NvbnN0YW50cy50cyIsICJzcmMvdXRpbHMvaGVscGVycy50cyIsICJzcmMvdXRpbHMvc2hvcnRjb2RlLXJlbmRlcmVyLnRzIiwgInNyYy91dGlscy9zaG9ydGNvZGUtcHJvY2Vzc29yLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFNob3J0Y29kZVByb2Nlc3NvciB9IGZyb20gJy4vdXRpbHMvc2hvcnRjb2RlLXByb2Nlc3Nvcic7XHJcblxyXG5cclxuLy8gaW50ZXJmYWNlIE15UGx1Z2luU2V0dGluZ3Mge1xyXG4vLyBcdG15U2V0dGluZzogc3RyaW5nO1xyXG4vLyB9XHJcblxyXG4vLyBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xyXG4vLyBcdG15U2V0dGluZzogJ2RlZmF1bHQnXHJcbi8vIH1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9ic2lkaWFuMTF0eVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0cHJpdmF0ZSBwcm9jZXNzb3I6IFNob3J0Y29kZVByb2Nlc3NvcjtcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0dGhpcy5wcm9jZXNzb3IgPSBuZXcgU2hvcnRjb2RlUHJvY2Vzc29yKHRoaXMuYXBwKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ29kZSBibG9ja3MgaW5kaXZpZHVlbHMgcG91ciBMaXZlIFByZXZpZXdcclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcihcImltYWdlXCIsIHRoaXMucHJvY2Vzc29yLnByb2Nlc3NDb2RlQmxvY2suYmluZCh0aGlzLnByb2Nlc3NvcikpO1xyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKFwiZ3JpZFwiLCB0aGlzLnByb2Nlc3Nvci5wcm9jZXNzQ29kZUJsb2NrLmJpbmQodGhpcy5wcm9jZXNzb3IpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcihcInZpZGVvXCIsIHRoaXMucHJvY2Vzc29yLnByb2Nlc3NDb2RlQmxvY2suYmluZCh0aGlzLnByb2Nlc3NvcikpO1xyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKFwiZmlndXJlXCIsIHRoaXMucHJvY2Vzc29yLnByb2Nlc3NDb2RlQmxvY2suYmluZCh0aGlzLnByb2Nlc3NvcikpO1xyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKFwiaW1hZ2Vub3RlXCIsIHRoaXMucHJvY2Vzc29yLnByb2Nlc3NDb2RlQmxvY2suYmluZCh0aGlzLnByb2Nlc3NvcikpO1xyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKFwiZnVsbHBhZ2VcIiwgdGhpcy5wcm9jZXNzb3IucHJvY2Vzc0NvZGVCbG9jay5iaW5kKHRoaXMucHJvY2Vzc29yKSk7XHJcblx0XHRcclxuXHRcdC8vIENvZGUgYmxvY2sgZ1x1MDBFOW5cdTAwRTlyaXF1ZSBwb3VyIHN5bnRheGUgMTF0eVxyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKFwiMTF0eVwiLCB0aGlzLnByb2Nlc3Nvci5wcm9jZXNzQ29kZUJsb2NrLmJpbmQodGhpcy5wcm9jZXNzb3IpKTtcclxuXHRcdFxyXG5cdFx0Ly8gUG9zdC1wcm9jZXNzb3IgcG91ciBSZWFkaW5nIFZpZXdcclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93blBvc3RQcm9jZXNzb3IoKGVsZW1lbnQsIGNvbnRleHQpID0+IHtcclxuXHRcdFx0dGhpcy5wcm9jZXNzb3IucHJvY2Vzc0VsZW1lbnQoZWxlbWVudCwgY29udGV4dCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0Ly8gQ2xlYW51cCBhdXRvbWF0aXF1ZVxyXG5cdH1cclxufSIsICJpbXBvcnQgeyBDc3NWYXJNYXBwaW5nIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IENTU19WQVJfTUFQUElORzogQ3NzVmFyTWFwcGluZyA9IHtcclxuXHRjb2w6ICctLWNvbCcsXHJcblx0cHJpbnRDb2w6ICctLXByaW50LWNvbCcsXHJcblx0d2lkdGg6ICctLXdpZHRoJyxcclxuXHRwcmludFdpZHRoOiAnLS1wcmludC13aWR0aCcsXHJcblx0cHJpbnRSb3c6ICctLXByaW50LXJvdycsXHJcblx0cHJpbnRIZWlnaHQ6ICctLXByaW50LWhlaWdodCcsXHJcblx0YWxpZ25TZWxmOiAnLS1hbGlnbi1zZWxmJyxcclxuXHRhbGlnbnNlbGY6ICctLWFsaWduLXNlbGYnLFxyXG5cdCdhbGlnbi1zZWxmJzogJy0tYWxpZ24tc2VsZicsXHJcblx0aW1nWDogJy0taW1nLXgnLFxyXG5cdGltZ1k6ICctLWltZy15JyxcclxuXHRpbWdXOiAnLS1pbWctdycsXHJcblx0cGFnZTogJy0tcGFnZWRqcy1mdWxsLXBhZ2UnLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IFNIT1JUQ09ERV9SRUdFWCA9IC9cXHslXFxzKihcXHcrKVxccysoW14lXSspXFxzKiVcXH0vZztcclxuXHJcbmV4cG9ydCBjb25zdCBTVVBQT1JURURfU0hPUlRDT0RFX1RZUEVTID0gW1xyXG5cdCdpbWFnZScsXHJcblx0J2dyaWQnLCBcclxuXHQndmlkZW8nLFxyXG5cdCdmaWd1cmUnLFxyXG5cdCdpbWFnZW5vdGUnLFxyXG5cdCdmdWxscGFnZSdcclxuXSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCBjb25zdCBNRURJQV9URU1QTEFURVMgPSB7XHJcblx0aW1hZ2U6IHtcclxuXHRcdHRlbXBsYXRlOiAnPGZpZ3VyZSBpZD1cIntpZH1cIiBkYXRhLXR5cGU9XCJ7dHlwZX1cIiBkYXRhLWdyaWQ9XCJpbWFnZVwiIGNsYXNzPVwiZmlndXJlIHt0eXBlfSB7Y2xhc3Nlc31cIiBkYXRhLXNyYz1cIntzcmN9XCJ7c3R5bGVzfT57bWVkaWF9PGZpZ2NhcHRpb24gY2xhc3M9XCJmaWdjYXB0aW9uXCI+e2NhcHRpb259PC9maWdjYXB0aW9uPjwvZmlndXJlPidcclxuXHR9LFxyXG5cdGltYWdlbm90ZToge1xyXG5cdFx0dGVtcGxhdGU6ICc8c3BhbiBpZD1cIntpZH1cIiBkYXRhLXR5cGU9XCJ7dHlwZX1cIiBjbGFzcz1cInt0eXBlfSB7Y2xhc3Nlc31cIiBkYXRhLXNyYz1cIntzcmN9XCJ7c3R5bGVzfT57bWVkaWF9PHNwYW4gY2xhc3M9XCJmaWdjYXB0aW9uXCI+e2NhcHRpb259PC9zcGFuPjwvc3Bhbj4nXHJcblx0fSxcclxuXHRmaWd1cmU6IHtcclxuXHRcdHRlbXBsYXRlOiAnPGZpZ3VyZSBpZD1cIntpZH1cIiBkYXRhLXNyYz1cIntzcmN9XCIgZGF0YS10eXBlPVwie3R5cGV9XCIgZGF0YS1ncmlkPVwiaW1hZ2VcIiBjbGFzcz1cInt0eXBlfSB7Y2xhc3Nlc31cIntzdHlsZXN9PnttZWRpYX08ZmlnY2FwdGlvbiBjbGFzcz1cImZpZ2NhcHRpb25cIj57Y2FwdGlvbn08L2ZpZ2NhcHRpb24+PC9maWd1cmU+J1xyXG5cdH0sXHJcblx0Z3JpZDoge1xyXG5cdFx0dGVtcGxhdGU6ICc8ZmlndXJlIGlkPVwie2lkfVwiIGRhdGEtc3JjPVwie3NyY31cIiBkYXRhLXR5cGU9XCJ7dHlwZX1cIiBkYXRhLWdyaWQ9XCJpbWFnZVwiIGNsYXNzPVwiZmlndXJlIHt0eXBlfSB7Y2xhc3Nlc31cIntzdHlsZXN9PnttZWRpYX08L2ZpZ3VyZT48ZmlnY2FwdGlvbiBjbGFzcz1cImZpZ2NhcHRpb25cIntzdHlsZXN9PntjYXB0aW9ufTwvZmlnY2FwdGlvbj4nXHJcblx0fSxcclxuXHRmdWxscGFnZToge1xyXG5cdFx0dGVtcGxhdGU6ICc8ZmlndXJlIGlkPVwie2lkfVwiIGRhdGEtc3JjPVwie3NyY31cIiBkYXRhLXR5cGU9XCJ7dHlwZX1cIiBkYXRhLWdyaWQ9XCJpbWFnZVwiIGNsYXNzPVwiZnVsbC1wYWdlIGZpZ3VyZSB7dHlwZX0ge2NsYXNzZXN9XCJ7c3R5bGVzfT57bWVkaWF9PC9maWd1cmU+J1xyXG5cdH0sXHJcblx0dmlkZW86IHtcclxuXHRcdHRlbXBsYXRlOiAnPGZpZ3VyZSBpZD1cIntpZH1cIiBkYXRhLXR5cGU9XCJ7dHlwZX1cIiBkYXRhLWdyaWQ9XCJjb250ZW50XCIgY2xhc3M9XCJ2aWRlbyB7Y2xhc3Nlc31cIntzdHlsZXN9PnttZWRpYX08ZmlnY2FwdGlvbiBjbGFzcz1cImZpZ2NhcHRpb25cIj57Y2FwdGlvbn08L2ZpZ2NhcHRpb24+PC9maWd1cmU+J1xyXG5cdH1cclxufTsiLCAiaW1wb3J0IHsgU2hvcnRjb2RlQ29uZmlnIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBDU1NfVkFSX01BUFBJTkcgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTdHlsZXMoY29uZmlnOiBTaG9ydGNvZGVDb25maWcpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcclxuXHRjb25zdCBzdHlsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuXHRcclxuXHRPYmplY3QuZW50cmllcyhjb25maWcpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xyXG5cdFx0aWYgKENTU19WQVJfTUFQUElOR1trZXldICYmIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09ICcnKSB7XHJcblx0XHRcdGNvbnN0IGNsZWFuVmFsdWUgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUucmVwbGFjZSgvXltcIiddfFtcIiddJC9nLCAnJykgOiB2YWx1ZTtcclxuXHRcdFx0c3R5bGVzW0NTU19WQVJfTUFQUElOR1trZXldXSA9IGNsZWFuVmFsdWU7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdHJldHVybiBzdHlsZXM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBseVN0eWxlcyhlbGVtZW50OiBIVE1MRWxlbWVudCwgY29uZmlnOiBTaG9ydGNvZGVDb25maWcpOiB2b2lkIHtcclxuXHRjb25zdCBzdHlsZXMgPSBnZW5lcmF0ZVN0eWxlcyhjb25maWcpO1xyXG5cdE9iamVjdC5lbnRyaWVzKHN0eWxlcykuZm9yRWFjaCgoW3Byb3BlcnR5LCB2YWx1ZV0pID0+IHtcclxuXHRcdGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkocHJvcGVydHksIHZhbHVlKTtcclxuXHR9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuQWx0KGNhcHRpb246IHN0cmluZyk6IHN0cmluZyB7XHJcblx0aWYgKCFjYXB0aW9uKSByZXR1cm4gJyc7XHJcblx0XHJcblx0cmV0dXJuIGNhcHRpb25cclxuXHRcdC5yZXBsYWNlKC9cXCooW14qXSspXFwqL2csICckMScpXHJcblx0XHQucmVwbGFjZSgvPFtePl0rPi9nLCAnICcpXHJcblx0XHQucmVwbGFjZSgvJlteO10rOy9nLCAnICcpXHJcblx0XHQucmVwbGFjZSgvXFxzKy9nLCAnICcpXHJcblx0XHQudHJpbSgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRyZXR1cm4gdGV4dFxyXG5cdFx0LnJlcGxhY2UoL35+KC4qPyl+fi9nLCAnPGRlbD4kMTwvZGVsPicpXHJcblx0XHQucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKVxyXG5cdFx0LnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICc8ZW0+JDE8L2VtPicpXHJcblx0XHQucmVwbGFjZSgvYCguKj8pYC9nLCAnPGNvZGU+JDE8L2NvZGU+JylcclxuXHRcdC5yZXBsYWNlKC88YnI+L2csICc8YnI+Jyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNob3J0Y29kZVBhcmFtcyhwYXJhbXM6IHN0cmluZyk6IHsgc3JjPzogc3RyaW5nOyBvcHRpb25zOiBTaG9ydGNvZGVDb25maWcgfSB7XHJcblx0Ly8gTmV0dG95ZXIgbGVzIHNhdXRzIGRlIGxpZ25lIGV0IGVzcGFjZXMgbXVsdGlwbGVzXHJcblx0cGFyYW1zID0gcGFyYW1zLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XHJcblx0XHJcblx0Ly8gUmVnZXggcGx1cyBmbGV4aWJsZSBwb3VyIGdcdTAwRTlyZXIgZGlmZlx1MDBFOXJlbnRzIGZvcm1hdHNcclxuXHRjb25zdCBtYXRjaCA9IHBhcmFtcy5tYXRjaCgvXltcIiddKFteXCInXSspW1wiJ10oPzpcXHMqLFxccyooXFx7LipcXH0pKT8kLykgfHxcclxuXHQgICAgICAgICAgICAgIHBhcmFtcy5tYXRjaCgvXihbXixcXHNdKykoPzpcXHMqLFxccyooXFx7LipcXH0pKT8kLyk7XHJcblx0XHJcblx0aWYgKCFtYXRjaCkge1xyXG5cdFx0Ly8gRmFsbGJhY2s6IHByZW5kcmUgdG91dCBhdmFudCBsYSBwcmVtaVx1MDBFOHJlIHZpcmd1bGUgY29tbWUgc3JjXHJcblx0XHRjb25zdCBjb21tYUluZGV4ID0gcGFyYW1zLmluZGV4T2YoJywnKTtcclxuXHRcdGlmIChjb21tYUluZGV4ID4gMCkge1xyXG5cdFx0XHRjb25zdCBzcmMgPSBwYXJhbXMuc3Vic3RyaW5nKDAsIGNvbW1hSW5kZXgpLnRyaW0oKS5yZXBsYWNlKC9eW1wiJ118W1wiJ10kL2csICcnKTtcclxuXHRcdFx0Y29uc3Qgb3B0aW9uc1N0ciA9IHBhcmFtcy5zdWJzdHJpbmcoY29tbWFJbmRleCArIDEpLnRyaW0oKTtcclxuXHRcdFx0XHJcblx0XHRcdGxldCBvcHRpb25zOiBTaG9ydGNvZGVDb25maWcgPSB7fTtcclxuXHRcdFx0aWYgKG9wdGlvbnNTdHIuc3RhcnRzV2l0aCgneycpKSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGNvbnN0IGNsZWFuT3B0aW9ucyA9IG9wdGlvbnNTdHIucmVwbGFjZSgvLChcXHMqW31cXF1dKS9nLCAnJDEnKTtcclxuXHRcdFx0XHRcdG9wdGlvbnMgPSBGdW5jdGlvbihgXCJ1c2Ugc3RyaWN0XCI7IHJldHVybiAoJHtjbGVhbk9wdGlvbnN9KWApKCk7XHJcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCdFcnJldXIgcGFyc2luZyBvcHRpb25zOicsIGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHsgc3JjLCBvcHRpb25zIH07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHRocm93IG5ldyBFcnJvcignRm9ybWF0IGRlIHBhcmFtXHUwMEU4dHJlcyBpbnZhbGlkZScpO1xyXG5cdH1cclxuXHJcblx0Y29uc3Qgc3JjID0gbWF0Y2hbMV07XHJcblx0bGV0IG9wdGlvbnM6IFNob3J0Y29kZUNvbmZpZyA9IHt9O1xyXG5cclxuXHRpZiAobWF0Y2hbMl0pIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IGNsZWFuT3B0aW9ucyA9IG1hdGNoWzJdLnJlcGxhY2UoLywoXFxzKlt9XFxdXSkvZywgJyQxJyk7XHJcblx0XHRcdG9wdGlvbnMgPSBGdW5jdGlvbihgXCJ1c2Ugc3RyaWN0XCI7IHJldHVybiAoJHtjbGVhbk9wdGlvbnN9KWApKCk7XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignRXJyZXVyIHBhcnNpbmcgb3B0aW9uczonLCBlKTtcclxuXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIHsgc3JjLCBvcHRpb25zIH07XHJcbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBTaG9ydGNvZGVDb25maWcsIFNob3J0Y29kZVR5cGUgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IGFwcGx5U3R5bGVzLCBjbGVhbkFsdCwgcmVuZGVyTWFya2Rvd24sIGdlbmVyYXRlU3R5bGVzIH0gZnJvbSAnLi9oZWxwZXJzJztcclxuaW1wb3J0IHsgU1VQUE9SVEVEX1NIT1JUQ09ERV9UWVBFUywgTUVESUFfVEVNUExBVEVTIH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNob3J0Y29kZVJlbmRlcmVyIHtcclxuXHRwcml2YXRlIGdsb2JhbEVsZW1lbnRDb3VudGVyID0gMDtcclxuXHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge31cclxuXHJcblx0cmVuZGVyKHR5cGU6IHN0cmluZywgcGFyYW1zOiB7IHNyYz86IHN0cmluZzsgb3B0aW9uczogU2hvcnRjb2RlQ29uZmlnIH0pOiBIVE1MRWxlbWVudCB8IG51bGwge1xyXG5cdFx0aWYgKCFTVVBQT1JURURfU0hPUlRDT0RFX1RZUEVTLmluY2x1ZGVzKHR5cGUgYXMgU2hvcnRjb2RlVHlwZSkpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKGBUeXBlIGRlIHNob3J0Y29kZSBub24gc3VwcG9ydFx1MDBFOTogJHt0eXBlfWApO1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCB7IHNyYywgb3B0aW9ucyA9IHt9IH0gPSBwYXJhbXM7XHJcblx0XHRjb25zdCBjb25maWcgPSB7IHNyYzogdGhpcy5yZXNvbHZlSW1hZ2VQYXRoKHNyYyksIC4uLm9wdGlvbnMgfTtcclxuXHRcdFxyXG5cdFx0dGhpcy5nbG9iYWxFbGVtZW50Q291bnRlcisrO1xyXG5cdFx0XHJcblx0XHRjb25zdCB0ZW1wbGF0ZSA9IE1FRElBX1RFTVBMQVRFU1t0eXBlIGFzIGtleW9mIHR5cGVvZiBNRURJQV9URU1QTEFURVNdO1xyXG5cdFx0aWYgKCF0ZW1wbGF0ZSkgcmV0dXJuIG51bGw7XHJcblxyXG5cdFx0Y29uc3QgdGVtcGxhdGVEYXRhID0ge1xyXG5cdFx0XHRpZDogY29uZmlnLmlkIHx8IGAke3R5cGV9LSR7dGhpcy5nbG9iYWxFbGVtZW50Q291bnRlcn1gLFxyXG5cdFx0XHR0eXBlOiB0eXBlLFxyXG5cdFx0XHRjbGFzc2VzOiBjb25maWcuY2xhc3MgfHwgJycsXHJcblx0XHRcdHNyYzogY29uZmlnLnNyYyB8fCAnJyxcclxuXHRcdFx0bWVkaWE6IHRoaXMuY3JlYXRlTWVkaWFFbGVtZW50KHR5cGUsIGNvbmZpZyksXHJcblx0XHRcdGNhcHRpb246IGNvbmZpZy5jYXB0aW9uID8gcmVuZGVyTWFya2Rvd24oY29uZmlnLmNhcHRpb24pIDogJycsXHJcblx0XHRcdHN0eWxlczogdGhpcy5nZW5lcmF0ZVN0eWxlc1N0cmluZyhjb25maWcpXHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IGh0bWxTdHJpbmcgPSB0aGlzLnJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLnRlbXBsYXRlLCB0ZW1wbGF0ZURhdGEpO1xyXG5cdFx0Y29uc3QgdGVtcERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGVtcERpdi5pbm5lckhUTUwgPSBodG1sU3RyaW5nO1xyXG5cdFx0XHJcblx0XHRjb25zdCBlbGVtZW50ID0gdGVtcERpdi5maXJzdEVsZW1lbnRDaGlsZCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmIChlbGVtZW50KSB7XHJcblx0XHRcdHRoaXMuYWRkRWRpdE9uQ2xpY2soZWxlbWVudCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBQb3VyIGdyaWQsIGdcdTAwRTlyZXIgbGEgc3RydWN0dXJlIG11bHRpcGxlXHJcblx0XHRcdGlmICh0eXBlID09PSAnZ3JpZCcgJiYgdGVtcERpdi5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XHJcblx0XHRcdFx0Y29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0XHRcdEFycmF5LmZyb20odGVtcERpdi5jaGlsZHJlbikuZm9yRWFjaChjaGlsZCA9PiB3cmFwcGVyLmFwcGVuZENoaWxkKGNoaWxkKSk7XHJcblx0XHRcdFx0cmV0dXJuIHdyYXBwZXI7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlc29sdmVJbWFnZVBhdGgoc3JjOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xyXG5cdFx0aWYgKCFzcmMpIHJldHVybiAnJztcclxuXHRcdFxyXG5cdFx0aWYgKHNyYy5zdGFydHNXaXRoKCdodHRwJykgfHwgc3JjLnN0YXJ0c1dpdGgoJ2FwcDovLycpKSB7XHJcblx0XHRcdHJldHVybiBzcmM7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHNyYywgJycpO1xyXG5cdFx0aWYgKGZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aChmaWxlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIGBhcHA6Ly9sb2NhbC8ke2VuY29kZVVSSUNvbXBvbmVudChzcmMpfWA7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlOiBzdHJpbmcsIGRhdGE6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRlbXBsYXRlXHJcblx0XHRcdC5yZXBsYWNlKC97aWR9L2csIGRhdGEuaWQpXHJcblx0XHRcdC5yZXBsYWNlKC97dHlwZX0vZywgZGF0YS50eXBlKVxyXG5cdFx0XHQucmVwbGFjZSgve2NsYXNzZXN9L2csIGRhdGEuY2xhc3NlcylcclxuXHRcdFx0LnJlcGxhY2UoL3tzcmN9L2csIGRhdGEuc3JjKVxyXG5cdFx0XHQucmVwbGFjZSgve21lZGlhfS9nLCBkYXRhLm1lZGlhKVxyXG5cdFx0XHQucmVwbGFjZSgve2NhcHRpb259L2csIGRhdGEuY2FwdGlvbilcclxuXHRcdFx0LnJlcGxhY2UoL3tzdHlsZXN9L2csIGRhdGEuc3R5bGVzKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlTWVkaWFFbGVtZW50KHR5cGU6IHN0cmluZywgY29uZmlnOiBTaG9ydGNvZGVDb25maWcpOiBzdHJpbmcge1xyXG5cdFx0aWYgKHR5cGUgPT09ICd2aWRlbycpIHtcclxuXHRcdFx0Y29uc3QgcG9zdGVyQXR0ciA9IGNvbmZpZy5wb3N0ZXIgPyBgIHBvc3Rlcj1cIiR7Y29uZmlnLnBvc3Rlcn1cImAgOiAnJztcclxuXHRcdFx0cmV0dXJuIGA8dmlkZW8gY29udHJvbHMke3Bvc3RlckF0dHJ9Pjxzb3VyY2Ugc3JjPVwiJHtjb25maWcuc3JjfVwiPjwvdmlkZW8+YDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIGA8aW1nIHNyYz1cIiR7Y29uZmlnLnNyY31cIiBhbHQ9XCIke2NsZWFuQWx0KGNvbmZpZy5jYXB0aW9uIHx8ICcnKX1cIj5gO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZW5lcmF0ZVN0eWxlc1N0cmluZyhjb25maWc6IFNob3J0Y29kZUNvbmZpZyk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBzdHlsZXMgPSBnZW5lcmF0ZVN0eWxlcyhjb25maWcpO1xyXG5cdFx0Y29uc3Qgc3R5bGVBcnJheSA9IE9iamVjdC5lbnRyaWVzKHN0eWxlcykubWFwKChbcHJvcCwgdmFsdWVdKSA9PiBgJHtwcm9wfTogJHt2YWx1ZX1gKTtcclxuXHRcdHJldHVybiBzdHlsZUFycmF5Lmxlbmd0aCA+IDAgPyBgIHN0eWxlPVwiJHtzdHlsZUFycmF5LmpvaW4oJzsgJyl9XCJgIDogJyc7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZEVkaXRPbkNsaWNrKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRlbGVtZW50LnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcclxuXHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBlZGl0QnV0dG9uID0gdGhpcy5maW5kRWRpdEJ1dHRvbihlbGVtZW50KTtcclxuXHRcdFx0aWYgKGVkaXRCdXR0b24pIHtcclxuXHRcdFx0XHRlZGl0QnV0dG9uLmNsaWNrKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBmaW5kRWRpdEJ1dHRvbihlbGVtZW50OiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XHJcblx0XHRsZXQgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG5cdFx0d2hpbGUgKHBhcmVudCkge1xyXG5cdFx0XHRjb25zdCBlZGl0QnV0dG9uID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWJsb2NrLWJ1dHRvbicpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRpZiAoZWRpdEJ1dHRvbikgcmV0dXJuIGVkaXRCdXR0b247XHJcblx0XHRcdHBhcmVudCA9IHBhcmVudC5wYXJlbnRFbGVtZW50O1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59IiwgImltcG9ydCB7IEFwcCwgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgU2hvcnRjb2RlUmVuZGVyZXIgfSBmcm9tICcuL3Nob3J0Y29kZS1yZW5kZXJlcic7XHJcbmltcG9ydCB7IHBhcnNlU2hvcnRjb2RlUGFyYW1zIH0gZnJvbSAnLi9oZWxwZXJzJztcclxuaW1wb3J0IHsgU0hPUlRDT0RFX1JFR0VYIH0gZnJvbSAnLi9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNob3J0Y29kZVByb2Nlc3NvciB7XHJcblx0cHJpdmF0ZSByZW5kZXJlcjogU2hvcnRjb2RlUmVuZGVyZXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHApIHtcclxuXHRcdHRoaXMucmVuZGVyZXIgPSBuZXcgU2hvcnRjb2RlUmVuZGVyZXIoYXBwKTtcclxuXHR9XHJcblxyXG5cdC8vIFBvdXIgbGVzIGNvZGUgYmxvY2tzIChMaXZlIFByZXZpZXcpXHJcblx0cHJvY2Vzc0NvZGVCbG9jayhzb3VyY2U6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50LCBjdHg6IGFueSk6IHZvaWQge1xyXG5cdFx0Ly8gRFx1MDBFOXRlY3RlciBsZSB0eXBlIGRlcHVpcyBsJ1x1MDBFOWxcdTAwRTltZW50IHBhcmVudCBvdSBsZSBjb250ZW51XHJcblx0XHRjb25zdCBjb250YWluZXIgPSBlbC5wYXJlbnRFbGVtZW50O1xyXG5cdFx0bGV0IHR5cGUgPSAnJztcclxuXHRcdFxyXG5cdFx0Ly8gQ2FzIDE6IGJsb2NrIHNwXHUwMEU5Y2lmaXF1ZSAoaW1hZ2UsIGdyaWQsIGV0Yy4pXHJcblx0XHRpZiAoY29udGFpbmVyICYmIGNvbnRhaW5lci5jbGFzc05hbWUpIHtcclxuXHRcdFx0Y29uc3QgbWF0Y2ggPSBjb250YWluZXIuY2xhc3NOYW1lLm1hdGNoKC9ibG9jay1sYW5ndWFnZS0oXFx3KykvKTtcclxuXHRcdFx0aWYgKG1hdGNoKSB7XHJcblx0XHRcdFx0dHlwZSA9IG1hdGNoWzFdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICh0eXBlICYmIHR5cGUgIT09ICdzaG9ydGNvZGUnKSB7XHJcblx0XHRcdC8vIEZvcm1hdCBzaW1wbGUgcG91ciBibG9ja3Mgc3BcdTAwRTljaWZpcXVlc1xyXG5cdFx0XHRsZXQgc3JjID0gJyc7XHJcblx0XHRcdGxldCBvcHRpb25zID0ge307XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoc291cmNlLnRyaW0oKSkge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZVNob3J0Y29kZVBhcmFtcyhzb3VyY2UudHJpbSgpKTtcclxuXHRcdFx0XHRcdHNyYyA9IHBhcnNlZC5zcmMgfHwgJyc7XHJcblx0XHRcdFx0XHRvcHRpb25zID0gcGFyc2VkLm9wdGlvbnM7XHJcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRcdFx0c3JjID0gc291cmNlLnRyaW0oKS5yZXBsYWNlKC9bJ1wiXS9nLCAnJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBodG1sRWxlbWVudCA9IHRoaXMucmVuZGVyZXIucmVuZGVyKHR5cGUsIHsgc3JjLCBvcHRpb25zIH0pO1xyXG5cdFx0XHRpZiAoaHRtbEVsZW1lbnQpIHtcclxuXHRcdFx0XHRlbC5hcHBlbmRDaGlsZChodG1sRWxlbWVudCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBDYXMgMjogYmxvY2sgc2hvcnRjb2RlIGF2ZWMgc3ludGF4ZSAxMXR5XHJcblx0XHRjb25zdCBzaG9ydGNvZGVNYXRjaCA9IHNvdXJjZS5tYXRjaCgvXFx7JVxccyooXFx3KylcXHMrKFteJV0rKVxccyolXFx9Lyk7XHJcblx0XHRpZiAoIXNob3J0Y29kZU1hdGNoKSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignRm9ybWF0IHNob3J0Y29kZSBpbnZhbGlkZSBkYW5zIGNvZGUgYmxvY2snKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjb25zdCBbLCBzaG9ydGNvZGVUeXBlLCBwYXJhbXNdID0gc2hvcnRjb2RlTWF0Y2g7XHJcblx0XHRcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHBhcnNlZFBhcmFtcyA9IHBhcnNlU2hvcnRjb2RlUGFyYW1zKHBhcmFtcyk7XHJcblx0XHRcdGNvbnN0IGh0bWxFbGVtZW50ID0gdGhpcy5yZW5kZXJlci5yZW5kZXIoc2hvcnRjb2RlVHlwZSwgcGFyc2VkUGFyYW1zKTtcclxuXHRcdFx0aWYgKGh0bWxFbGVtZW50KSB7XHJcblx0XHRcdFx0ZWwuYXBwZW5kQ2hpbGQoaHRtbEVsZW1lbnQpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJldXIgcGFyc2luZyBzaG9ydGNvZGU6JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJvY2Vzc0VsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbnRleHQ6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdQcm9jZXNzaW5nIGVsZW1lbnQ6JywgZWxlbWVudCk7XHJcblx0XHRcclxuXHRcdC8vIFRyYWl0ZXIgdG91cyBsZXMgblx1MDE1M3VkcywgeSBjb21wcmlzIGRhbnMgbGVzIHBhcmFncmFwaGVzXHJcblx0XHR0aGlzLnByb2Nlc3NOb2RlUmVjdXJzaXZlbHkoZWxlbWVudCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHByb2Nlc3NOb2RlUmVjdXJzaXZlbHkobm9kZTogTm9kZSkge1xyXG5cdFx0aWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFKSB7XHJcblx0XHRcdGNvbnN0IHRleHROb2RlID0gbm9kZSBhcyBUZXh0O1xyXG5cdFx0XHRpZiAodGV4dE5vZGUudGV4dENvbnRlbnQgJiYgdGhpcy5jb250YWluc1Nob3J0Y29kZSh0ZXh0Tm9kZS50ZXh0Q29udGVudCkpIHtcclxuXHRcdFx0XHR0aGlzLnByb2Nlc3NUZXh0Tm9kZSh0ZXh0Tm9kZSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFRyYWl0ZXIgbGVzIGVuZmFudHNcclxuXHRcdGNvbnN0IGNoaWxkcmVuID0gQXJyYXkuZnJvbShub2RlLmNoaWxkTm9kZXMpO1xyXG5cdFx0Y2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB0aGlzLnByb2Nlc3NOb2RlUmVjdXJzaXZlbHkoY2hpbGQpKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY29udGFpbnNTaG9ydGNvZGUodGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBoYXNTaG9ydGNvZGUgPSAvXFx7JS4qJVxcfS8udGVzdCh0ZXh0KTtcclxuXHRcdGlmIChoYXNTaG9ydGNvZGUpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coJ0ZvdW5kIHNob3J0Y29kZSBpbiB0ZXh0OicsIHRleHQpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGhhc1Nob3J0Y29kZTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcHJvY2Vzc1RleHROb2RlKHRleHROb2RlOiBUZXh0KSB7XHJcblx0XHRjb25zdCB0ZXh0ID0gdGV4dE5vZGUudGV4dENvbnRlbnQgfHwgJyc7XHJcblx0XHRjb25zdCBmcmFnbWVudHM6IChzdHJpbmcgfCBIVE1MRWxlbWVudClbXSA9IFtdO1xyXG5cdFx0bGV0IGxhc3RJbmRleCA9IDA7XHJcblxyXG5cdFx0U0hPUlRDT0RFX1JFR0VYLmxhc3RJbmRleCA9IDA7XHJcblx0XHRcclxuXHRcdGxldCBtYXRjaDtcclxuXHRcdHdoaWxlICgobWF0Y2ggPSBTSE9SVENPREVfUkVHRVguZXhlYyh0ZXh0KSkgIT09IG51bGwpIHtcclxuXHRcdFx0aWYgKG1hdGNoLmluZGV4ID4gbGFzdEluZGV4KSB7XHJcblx0XHRcdFx0ZnJhZ21lbnRzLnB1c2godGV4dC5zbGljZShsYXN0SW5kZXgsIG1hdGNoLmluZGV4KSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IFtmdWxsTWF0Y2gsIHR5cGUsIHBhcmFtc10gPSBtYXRjaDtcclxuXHRcdFx0Y29uc3QgaHRtbEVsZW1lbnQgPSB0aGlzLnBhcnNlQW5kUmVuZGVyKHR5cGUsIHBhcmFtcyk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoaHRtbEVsZW1lbnQpIHtcclxuXHRcdFx0XHRmcmFnbWVudHMucHVzaChodG1sRWxlbWVudCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZnJhZ21lbnRzLnB1c2goZnVsbE1hdGNoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGFzdEluZGV4ID0gbWF0Y2guaW5kZXggKyBmdWxsTWF0Y2gubGVuZ3RoO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xyXG5cdFx0XHRmcmFnbWVudHMucHVzaCh0ZXh0LnNsaWNlKGxhc3RJbmRleCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChmcmFnbWVudHMubGVuZ3RoID4gMSB8fCAoZnJhZ21lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgZnJhZ21lbnRzWzBdICE9PSAnc3RyaW5nJykpIHtcclxuXHRcdFx0Y29uc3QgcGFyZW50Tm9kZSA9IHRleHROb2RlLnBhcmVudE5vZGU7XHJcblx0XHRcdGlmIChwYXJlbnROb2RlKSB7XHJcblx0XHRcdFx0ZnJhZ21lbnRzLmZvckVhY2goZnJhZ21lbnQgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBmcmFnbWVudCA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGZyYWdtZW50LnRyaW0oKSkge1xyXG5cdFx0XHRcdFx0XHRcdHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGZyYWdtZW50KSwgdGV4dE5vZGUpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRwYXJlbnROb2RlLmluc2VydEJlZm9yZShmcmFnbWVudCwgdGV4dE5vZGUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGV4dE5vZGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHBhcnNlQW5kUmVuZGVyKHR5cGU6IHN0cmluZywgcGFyYW1zOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB8IG51bGwge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcGFyc2VkUGFyYW1zID0gcGFyc2VTaG9ydGNvZGVQYXJhbXMocGFyYW1zKTtcclxuXHRcdFx0cmV0dXJuIHRoaXMucmVuZGVyZXIucmVuZGVyKHR5cGUsIHBhcnNlZFBhcmFtcyk7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJldXIgcGFyc2luZyBzaG9ydGNvZGU6JywgZXJyb3IpO1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQTRGOzs7QUNFckYsSUFBTSxrQkFBaUM7QUFBQSxFQUM3QyxLQUFLO0FBQUEsRUFDTCxVQUFVO0FBQUEsRUFDVixPQUFPO0FBQUEsRUFDUCxZQUFZO0FBQUEsRUFDWixVQUFVO0FBQUEsRUFDVixhQUFhO0FBQUEsRUFDYixXQUFXO0FBQUEsRUFDWCxXQUFXO0FBQUEsRUFDWCxjQUFjO0FBQUEsRUFDZCxNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQ1A7QUFFTyxJQUFNLGtCQUFrQjtBQUV4QixJQUFNLDRCQUE0QjtBQUFBLEVBQ3hDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDRDtBQUVPLElBQU0sa0JBQWtCO0FBQUEsRUFDOUIsT0FBTztBQUFBLElBQ04sVUFBVTtBQUFBLEVBQ1g7QUFBQSxFQUNBLFdBQVc7QUFBQSxJQUNWLFVBQVU7QUFBQSxFQUNYO0FBQUEsRUFDQSxRQUFRO0FBQUEsSUFDUCxVQUFVO0FBQUEsRUFDWDtBQUFBLEVBQ0EsTUFBTTtBQUFBLElBQ0wsVUFBVTtBQUFBLEVBQ1g7QUFBQSxFQUNBLFVBQVU7QUFBQSxJQUNULFVBQVU7QUFBQSxFQUNYO0FBQUEsRUFDQSxPQUFPO0FBQUEsSUFDTixVQUFVO0FBQUEsRUFDWDtBQUNEOzs7QUM3Q08sU0FBUyxlQUFlLFFBQWlEO0FBQy9F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
